#!/bin/sh

# Prints the current volume or ðŸ”‡ if muted.
case $BLOCK_BUTTON in

	1) setsid -f "$TERMINAL" -e pulsemixer ;;
  2) amixer set Master toggle ;;
	3) notify-send "ðŸ“¢ Volume module" "\- Shows volume ðŸ”Š, ðŸ”‡ if muted.
- Middle click to mute.
- Scroll to change." ;;
  4) amixer set Master 5%+ ;;
  5) amixer set Master 5%- ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

vol=$(amixer get Master | grep Left | awk '{print $5}'|sed 's/[^0-9]//g' | tr -d '\n')
muted=$(amixer | awk '/off/ {print $6}')

if [[ "$vol" -gt "70" ]]; then
  icon=" ðŸ”Š"
elif [[ "$vol" -gt "30" ]]; then
  icon=" ðŸ”‰"
elif [[ "$vol" -gt "-1" ]]; then
  icon=" ðŸ”ˆ"
fi

if [ -z "$muted" ]; then
  echo "$icon$vol%"
else
  echo "ðŸ”‡"
fi
